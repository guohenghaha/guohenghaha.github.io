---
layout: page
title: arts 13 
permalink: /arts-13/
---

### MVC 三层架构不太适合大型项目

最近发生的一些 bug 让我越来越意识到 DDD 的好处了（maybe），传统的 MVC 架构中，controller 会越来越厚，尤其是资源的指责和界限会逐渐模糊，需要依靠 DDD 的思想再做划分。

### 契约设计

本周线上发生了一个 bug，原因是我以为在某个表达审核通过的业务方法中传入的商品一定是审核通过的，但是有某种情况是审核未通过，导致了问题，这让我想起契约设计的思路可以解决这个问题。

[建造无错软件：契约式设计引论](http://www.softwarepractitioner.com/translations/meyer/contract.shtml)

契约设计的核心我认为是保障软件质量，包括完成规定的任务，也可以正确处理异常。

方便除错，因为不满足某个契约会立刻报错，而不是让错误扩散到更深的自函数，甚至默除错监控都看不到。

契约即文档，调用方看下 require 就知道自己要怎么调用了。

之前很模糊，到底是调用方保证还是实现保证不清楚，容易两边都没写契约检查的情况，而契约设计保障了这点。

### Redis 用满了，就需要升级内存？

大促的时候发现 Redis 用满了，有同学说需要升级内存。我认为需要看下此时的缓存命中率，如果缓存命中率没有降低，说明被淘汰的数据是冷数据，那么可以不用升级内存，如果缓存命中率降低则说明可能淘汰了热数据才需要考虑升级内存。